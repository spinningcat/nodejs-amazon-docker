## Product Info

### <span style="text-decoration:none; font-size:24px;">MVP</span>

<span style="color: red; font-size:24px; text-decoration:underline;
">**Below list is just a draft for modules it can be modified or changed some part of it with times.** </span>

#### <span style="border: 4px solid black; padding: 5px;">Admin</span>

- **Description:** The admin module will provide administrative functionalities, allowing authorized users to manage users, roles, and system settings.

#### <span style="border: 4px solid black; padding: 5px;">User</span>

- **Description:** The user module is responsible for handling user-related tasks such as authentication, profile management, and access to relevant features.

#### <span style="border: 4px solid black; padding: 5px;">Company</span>

- **Description:** The company module involves features related to company information, such as creation, editing, and deletion of company profiles.

#### <span style="border: 4px solid black; padding: 5px;">Branch</span>

- **Description:** This module deals with the management of different branches within a company, including location details and branch-specific settings.

#### <span style="border: 4px solid black; padding: 5px;">Camera</span>

- **Description:** The camera module focuses on integrating camera functionalities, enabling users to connect and manage cameras for various purposes.

#### <span style="border: 4px solid black; padding: 5px;">Module Activation</span>

- **Description:** This module allows users to activate and deactivate specific features or modules based on their subscription or customization needs.

#### <span style="border: 4px solid black; padding: 5px;">Information Transferring</span>

- **Description:** Information transferring module facilitates the seamless transfer of data between different components within the system.

#### <span style="border: 4px solid black; padding: 5px;">Process</span>

- **Description:** The process module defines and manages various workflows and processes within the system, ensuring efficient task execution.

#### <span style="border: 4px solid black; padding: 5px;">Rules</span>

- **Description:** The roles module involves defining and assigning different roles to users, determining their access levels and permissions.

#### <span style="border: 4px solid black; padding: 5px;">Security</span>

- **Description:** The security module is dedicated to implementing and managing security measures, including user access control and data protection.

#### <span style="border: 4px solid black; padding: 5px;">Agreement</span>

- **Description:** The agreement module handles the creation, acceptance, and management of agreements or contracts within the system.

#### <span style="border: 4px solid black; padding: 5px;">Amazon</span>

- **Description:** This module might be related to integrating with Amazon services for specific functionalities, such as saving files or such.

<span style="border: 4px solid black; padding:5px">#### Notification</span>

- **Description:** The notification module manages the generation and delivery of notifications to users, keeping them informed about relevant events.

### SubModules


<span style="color: red; font-size:24px; text-decoration:underline;
">**Below list is just a draft for sub modules it can be modified or changed some part of it with times.** </span>

#### <span style="border: 4px solid black; padding: 5px;">System Admin</span>
<div>
    <ul style="padding: 5px; border: 2px dotted black">
        <li style="padding: 5px">Adding User</li>
        <li style="padding: 5px">Removing User</li>
        <li style="padding: 5px">Get User(s) Data</li>
        <li style="padding: 5px">Change Status of User</li>
        <li style="padding: 5px">Send Notification to User</li>
        <li style="padding: 5px">Send Email to User</li>
    </ul>
</div>

#### <span style="border: 4px solid black; padding: 5px;">Application Admin</span>

<div>
    <ul style="padding: 5px; border: 2px dotted black">
        <li style="padding: 5px">Get Incident Log Data</li>
        <li style="padding: 5px">Get Maintenance Log Data</li>
        <li style="padding: 5px">Get Security Log Data</li>
        <li style="padding: 5px">Add User for Specific Branch</li>
        <li style="padding: 5px">Create Branch</li>
        <li style="padding: 5px">Remove Branch</li>
        <li style="padding: 5px">Create Camera</li>
        <li style="padding: 5px">Remove Camera</li>
        <li style="padding: 5px">Create Process</li>
        <li style="padding: 5px">Remove Process</li>
        <li style="padding: 5px">Get Reports (CSV)</li>
        <li style="padding: 5px">Set Permission of Application User</li>
        <li style="padding: 5px">Set Specific Setting for Branch</li>
        <li style="padding: 5px">Set Notification Preferences</li>
        <li style="padding: 5px">Set Email Preferences</li>
        <li style="padding: 5px">Create Specific Job for Being Notified</li>
        <li style="padding: 5px">Create Roles with Specific Permission</li>
        <li style="padding: 5px">Assign Specific Permission to User</li>
    </ul>
</div>

#### <span style="border: 4px solid black; padding: 5px;">Application User</span>

<div>
    <ul style="padding: 5px; border: 2px dotted black">
        <li style="padding: 5px">Get Incident Log Data</li>
        <li style="padding: 5px">Get Maintenance Log Data</li>
        <li style="padding: 5px">Get Security Log Data</li>
        <li style="padding: 5px">Get Reports (CSV)</li>
    </ul>
</div>

#### <span style="border: 4px solid black; padding: 5px;">Information Transferring</span>

<div>
    <ul style="padding: 5px; border: 2px dotted black">
        <li style="padding: 5px">Backend to Backend</li>
        <li style="padding: 5px">Backend to Frontend</li>
    </ul>
</div>

#### <span style="border: 4px solid black; padding: 5px;">Process</span>

<div>
    <ul style="padding: 5px; border: 2px dotted black">
        <li style="padding: 5px">Add Process</li>
        <li style="padding: 5px">Remove Process</li>
        <li style="padding: 5px">Update Process</li>
        <li style="padding: 5px">Get Process</li>
    </ul>
</div>

#### <span style="border: 4px solid black; padding: 5px;">Roles</span>

<div>
    <ul style="padding: 5px; border: 2px dotted black">
        <li style="padding: 5px">- Role Hierrchy Design</li>
        <li style="padding: 5px">- Permission Design</li>
    </ul>
</div>

#### <span style="border: 4px solid black; padding: 5px;">Security</span>

<div>
    <ul style="padding: 5px; border: 2px dotted black">
        <li style="padding: 5px">Role Based</li>
        <li style="padding: 5px">API Based</li>
        <li style="padding: 5px">MFA</li>
        <li style="padding: 5px">Authentication</li>
        <li style="padding: 5px">Authorization</li>
        <li style="padding: 5px">Data Encryption</li>
        <li style="padding: 5px">Logging</li>
        <li style="padding: 5px">Session Management</li>
        <li style="padding: 5px">Error Handling</li>
        <li style="padding: 5px">Password Encryption</li>
        <li style="padding: 5px">Cross-Site Scripting (XSS) Protection</li>
        <li style="padding: 5px">Cross-Site Request Forgery (CSRF) Protection</li>
        <li style="padding: 5px">Security Headers</li>
        <li style="padding: 5px">Password Hashing</li>
        <li style="padding: 5px">Https Only Cookies</li>
    </ul>
</div>

#### <span style="border: 4px solid black; padding: 5px;">Agreement</span>

<div>
    <ul style="padding: 5px; border: 2px dotted black">
        <li style="padding: 5px">Add Agreement</li>
        <li style="padding: 5px">Update Agreement</li>
        <li style="padding: 5px">Remove Agreement</li>
    </ul>
</div>

#### <span style="border: 4px solid black; padding: 5px;">Amazon</span>

- Export to amazon S3 

#### <span style="border: 4px solid black; padding: 5px;">Notification</span>

<div>
<ul style="padding:5px; border: 2px dotted black">
<li style="padding:5px"> File notification </li>
<li style="padding:5px"> Announcement notification </li>
<li style="padding:5px"> User Agreement Notification </li>
<li style="padding:5px"> Message Notification </li>
<li style="padding:5px"> Registrantion Notification </li>
<li style="padding:5px" > User Status Notification </li>
</ul>
</div>

#### <span style="border: 4px solid black; padding: 5px;">User Camera Access</span>

<div>
    <ul style="padding: 5px; border: 2px dotted black">
        <li style="padding: 5px">Permission</li>
    </ul>
</div>

### App
#### <span style="border: 4px solid black; padding: 5px;">Prod</span>

* Base URL : backend.watchdata.ai
* Backend PORT: 3001

#### <span style="border: 4px solid black; padding: 5px;">Test</span>

* Base URL:13.50.19.8
* Backend Port: 3001

#### <span style="border: 4px solid black; padding: 5px;">Tech Stack</span>
* Nodejs, postgresql, prisma, amazon, rabbitmq, redis.

#### <span style="border: 4px solid black; padding: 5px;">Database Schema</span>

- https://dbdiagram.io/d/Watch-Data-6597fdddac844320ae50e0e4

#### <span style="border: 4px solid black; padding: 5px;">End Points</span>

<span style="color: red; font-size:24px; text-decoration:underline;
">**There is four columns that are you need to follow in order to be aware last condition of api. 
Status, Will be Used, In prod and In Test** </span>

<table>
  <thead>
    <tr>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Not Started</td>
    </tr>
    <tr>
      <td>In Progress</td>
  </tr>
    <tr>
      <td>Done</td>
  </tr>
  </tbody>
</table>
<table>
  <thead>
    <tr>
      <th>Will be used?</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>---</td>
    </tr>
    <tr>
      <td>No</td>
  </tr>
    <tr>
      <td>Yes</td>
  </tr>
  </tbody>
</table>
<table>
  <thead>
    <tr>
      <th>In Test</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>No</td>
  </tr>
    <tr>
      <td>Yes</td>
  </tr>
  </tbody>
</table>
<table>
  <thead>
    <tr>
      <th>In Prod</th>
    </tr>
  </thead>
  <tbody>
   <tr>
      <td>No</td>
  </tr>
    <tr>
      <td>Yes</td>
  </tr>
  </tbody>
</table>


<span style="color: red; font-size:24px; text-decoration:underline;
">**Below list can change anytime. The parameter structure and etc. New apis can be added as well. That is really situtational list and some of them are based on lucky guess.** </span>

#### <span style="border: 4px solid black; padding: 5px;">Admin</span>

| Operation Type | End Point Explanation                 | End Point | Status        | Object | WillBeUsed? | In Test | In Prod |
| --------------- | -------------------------- | ---------------------- | ------------- | ------- |  ----- | ---- | ------ |
| Admin Operation          | User Add                 | ----         | Not Started   | --- |  ---  | --- | --- |
| Admin Operation          | User Remove                 | ----  | Not Started   |  ---   |  ---  | --- | --- |
| Admin Operation          | Get Users        | ---         | Not Started   |  ---   | ---   | --- | --- |
| Admin Operation          | Get spesific user with id      |  --- | Not Started  | ---   | ---   | --- | --- |
| Admin Operation          | Change User Status       | ---        | Not Started   | --- | ---   | --- | --- |
| Admin Operation          | Send Notification To Spesific User or Users       | ---        | Not Started   | --- | ---   | --- | --- |
| Admin Operation          | Send Email To Spesific User or Users      | ---        | Not Started   | --- | ---   | --- | --- |




#### <span style="border: 4px solid black; padding: 5px;">Admin Register</span>

| Operation Type | End Point Explanation                 | End Point | Status        | Object | WillBeUsed? | In Test | In Prod |
| --------------- | -------------------------- | ---------------------- | ------------- | ------- |  ----- | ---- | ------ |
| Admin Register           | Register Admin                 | `/api/v1/aregister`  (POST)           | Done   |  { "email":"berat@ex.com", "password": "1234", "rePassword": "12345", "roles":"Admin" }  | True   | --- | --- |

#### <span style="border: 4px solid black; padding: 5px;">Admin Login</span>

| Operation Type | End Point Explanation                 | End Point | Status        | Object | WillBeUsed? | In Test | In Prod |
| --------------- | -------------------------- | ---------------------- | ------------- | ------- |  ----- | ---- | ------ |
| Admin Login           | Register Admin                 | `/api/v1/aregister`  (POST)           | Done   |  { "email":"berat@ex.com", "password": "1234", "sessionExpiredTime": "120", "sessionIxExpired": "true" } | True   | --- | --- |

#### <span style="border: 4px solid black; padding: 5px;">Admin Logout</span>

| Operation Type | End Point Explanation                 | End Point | Status        | Object | WillBeUsed? | In Test | In Prod |
| --------------- | -------------------------- | ---------------------- | ------------- | ------- |  ----- | ---- | ------ |
| Admin Logout           | Register Admin                 | `/api/v1/aregister`  (POST)           | Done   |  ---- | True   | --- | --- |

#### <span style="border: 4px solid black; padding: 5px;">User</span>

| Operation Type | End Point Explanation                 | End Point | Status        | Object | WillBeUsed? | In Test | In Prod |
| --------------- | -------------------------- | ---------------------- | ------------- | ------- |  ----- | ---- | ------ |
| User Registeraataion Complete          | Complete Register                 | `/api/v1/registerCheck`  (POST)           | UNKNOWN   | ---   | ---   | --- | --- |

#### <span style="border: 4px solid black; padding: 5px;">User Register</span>

| Operation Type | End Point Explanation                 | End Point | Status        | Object | WillBeUsed? | In Test | In Prod |
| --------------- | -------------------------- | ---------------------- | ------------- | ------- |  ----- | ---- | ------ |
| User Register           | Register User                 | `/api/v1/uregister`  (POST)           | Ready for testing   | { "username":"bera32t@ex.com.tr" "password":"1234","rePassword" : "1234", "email" : "bera32t@ex.com.tr" ,"full_name": "berat", "role": "Admin", "account_status": "active" } | True   | YES | --- |

#### <span style="border: 4px solid black; padding: 5px;">User Login</span>

| Operation Type | End Point Explanation                 | End Point | Status        | Object | WillBeUsed? | In Test | In Prod |
| --------------- | -------------------------- | ---------------------- | ------------- | ------- |  ----- | ---- | ------ |
| User Login           | Login                 | `/api/v1/login`  (POST)           | Ready for testing   | {"username" : "bera32t@ex.com.tr", "password" : "1234"}   | True   | YES | --- |


#### <span style="border: 4px solid black; padding: 5px;">User Logout</span>

| Operation Type | End Point Explanation                 | End Point | Status        | Object | WillBeUsed? | In Test | In Prod |
| --------------- | -------------------------- | ---------------------- | ------------- | ------- |  ----- | ---- | ------ |
| User Logout           | Logout                 | `/api/v1/logout`  (POST)           | Ready for testing   | ---   | True   | YES | --- |

#### <span style="border: 4px solid black; padding: 5px;">Dashboard</span>

| Operation Type | End Point Explanation       | End Point | Status        | Object | WillBeUsed? | In Test | In Prod |
| --------------- | -------------------------- | ---------------------- | ------------- | ------- | ------ | --- | --- |
| Dashboard        | Between spesific Time | `/api/v1/currentTimeMinus` | Ready for testing  | /:90/:2    | True   | --- | --- |
| Dashboard        | Spesific Hour  (optional: grouping)       | `/api/v1/shours`     | Ready for testing | :14/:17  | ----   |
| Dashboard        | Spesific Hour  (optional: grouping)       | `/api/v1/spesificTime`     | Ready for Testing | {"startTime" : "...", "endTime" : "..."}  | ----   |
| Dashboard        | Daily | `/api/v1/day`         | Ready for testing   | /:10/:22  | ---   | --- | --- |
| Dashboard        | Date Range (optional: grouping)    | `/api/v1/dateRange/` | not started   | /:2024-02-04/:2024-02-07   | ---  | --- | --- |
| Dashboard        | FiveMin | `/api/v1/fiveMin`        | Ready for testing  | --- | ---   | --- | --- |
| Dashboard        | Weekly | `/api/v1/weekly`        | Ready for testing   | --- | ---   | --- | --- |
| Dashboard        | Monthly | `/api/v1/monthly`        | Not started   | --- | ---   | --- | --- |
| Dashboard        | Yearly | `/api/v1/yearly`        | Not started   | --- | --- | --- |
| Dashboard        | Get Incidents Log | `/api/v1/incidents`        | Not Started   | --- | ---   | --- |
| Dashboard        | Get Maintenance Logs | `/api/v1/maintenance`        | Not Started   | --- | ---   | --- |
| Dashboard        | Get Security Logs | `/api/v1/security`        | Not Started   | --- | ---   | --- |


   
#### <span style="border: 4px solid black; padding: 5px;">Company</span>

| Operation Type | End Point Explanation       | End Point | Status        | Object | WillBeUsed? | In Test | In Prod |
| --------------- | -------------------------- | ---------------------- | ------------- | ------- | ------ | ---- | ---- |
| Company          | Add Company                 | `/api/v1/company`  (POST)           | Done   | {"branchID " :"id": 1 ,"model":"Example Model","resolution":"Full HD","install_date":"2024-01-23T12:00:00Z","type":"Digital","status":"Active","protocol":"RTSP","streaming_url":"http://example.com/stream", "port": "23","label":"Example Label","channel":1,"operationDetails":{/* ... your JSON data for operationDetails */}}    | True   | ----- | --- |
| Company          | Get Company                 | `/api/v1/company`  (GET)           | Done  |  {id : 1 }    | True   | ---- | ---- |
| Company         | Get Company with id         | `/api/v1/company` (GET)        | Done   |  {id : 1 }   | True   | ---- | ---- |
| Company          | Remove Company with id      | `/api/v1/company/:id` (DELETE)        | Done   | {id : 1 }   | True   | --- | ---- |
| Comapny          | Update Company with id      | `/api/v1/company/:id` (PUT)        | Done  | { id : 1,  : updated Company Object} | True   | ---- | ---- |

#### <span style="border: 4px solid black; padding: 5px;">Branch</span>

| Operation Type | End Point Explanation       | End Point | Status        | Object | WillBeUsed? | In Test | In Prod |
| --------------- | -------------------------- | ---------------------- | ------------- | ------- | ------ | --- | --- |
| Branch          | Add Branch                 | `/api/v1/Branch`  (POST)           | Done   |{ "id": 2,"name": "Example Branch", "location": "Example Location" }   | True   | ---| --- |
| Branch          | Get Branch                 | `/api/v1/Branches`  (GET)           | Done   |  {id : 1 }    | True   | --- | ---- |
| Branch         | Get Branch with id         | `/api/v1/Branch` (GET)        | Done  |  {id : 1 }   | True   | --- | --- | --- | --- |
| Branch          | Remove Branch with id      | `/api/v1/Branch/:id` (DELETE)        | Done   | {id : 1 }   | True   | ---- | --- | --- |
| Comapny          | Update Branch with id      | `/api/v1/Branch/:id` (PUT)        | Done  | { id : 1,  : updated Branch Object} | True   | --- | --- | --- |


#### <span style="border: 4px solid black; padding: 5px;">Camera</span>

| Operation Type | End Point Explanation       | End Point | Status        | Object | WillBeUsed? | In Test | In Prod |
| --------------- | -------------------------- | ---------------------- | ------------- | ------- | ------ | --- | --- |
| Camera          | Add Camera                 | `/api/v1/camera`  (POST)           | Ready for prod   | { "branchID":  1, "model": "Example Model4", "user": "beratcam", "password": "1234" "resolution": "Full HD", "install_date": "2024-01-23T12:00:00Z", "type": "Digital", "status": "Active" "protocol": "RTSP", "host":"http://example.com/stream", "port": 23, "label": "Example Label", "channel": 1, "adittional": { "x" : 1, "y" : 2} }   | True   | YES | --- |
| Camera          | Get Camera                 | `/api/v1/cameras`  (GET)           |  Ready for prod   |  {id : 1 }    | True   | YES | ---|
| Camera          | Get Camera with id         | `/api/v1/camera/:id` (GET)        |  Ready for prod  |  {id : 1 }   | True   | YES | --- |
| Camera          | Remove Camera with id      | `/api/v1/cameras/:id` (DELETE)        |  Ready for prod  | {id : 1 }   | True   | YES | --- |
| Camera          | Update Camera with id      | `/api/v1/cameras/:id` (PUT)        |  Ready for prod   | { id : 1,  : updated Camera Object} | True   | YES | --- |
| Camera          | Insert Camera Data      | `/api/v1/cameraImage` (POST)        |  ----   | --- | ----   | --- | --- |

#### <span style="border: 4px solid black; padding: 5px;">Process</span>

| Operation Type | End Point Explanation       | End Point | Status        | Object | WillBeUsed? | In Test | In Prod |
| --------------- | -------------------------- | ---------------------- | ------------- | ------- | ------ | --- | --- |
| Process          | Add Process                 | `/api/v1/process`  (POST)           | Not Started   | ---   | ---   | --- | --- |
| Process          | Remove Process                 | `/api/v1/proces`  (DELETE)          | Not Started  |  {id : 1 }    |---   | --- | --- |
| Process          | Get Process                 | `/api/v1/process`  (GET)       | Not Started   |  {id : 1 }    |---   | --- | --- |
| Process          | Remove Process                 | `/api/v1/cameras`  (DELETE)         | Not Started   |  {id : 1 }    |---   | --- | --- |
| Process          | Update Spesific Process                 | `/api/v1/process`  (PUT)           | Not Started   |  {id : 1 }    |---   | --- | --- |


#### <span style="border: 4px solid black; padding: 5px;">Notification</span>

| Operation Type | End Point Explanation         | End Point                          | Status       | Object | WillBeUsed? | In Test | In Prod |
| -------------- | ----------------------------- | ---------------------------------- | ------------ | ------ | ----------- | ------- | ------- |
| Notification   | CSV Notification              | `/api/v1/Notification` (POST)      | In progress  | {"NotificationID": "id": 1, "model": "Example Model", "resolution": "Full HD", "install_date": "2024-01-23T12:00:00Z", "type": "Digital", "status": "Active", "protocol": "RTSP", "streaming_url": "http://example.com/stream", "port": "23", "label": "Example Label", "channel": 1, "operationDetails": {/* ... your JSON data for operationDetails */}} | ---          | ---     | ---     |
| Notification   | Get Notification              | `/api/v1/Notification` (GET)       | In Progress  | { "id": 1 }  | ---          | ---     | ---     |
| Notification   | Get Notification with id      | `/api/v1/Notification` (GET)       | In progress  | { "id": 1 }  | ---          | ---     | ---     |
| Notification   | Remove Notification with id   | `/api/v1/Notification/:id` (DELETE)| In progress  | { "id": 1 }  | ---          | ---     | ---     |
| Notification   | Update Notification Priority  | `/api/v1/Notification/:id:isSeen` (PUT)| In progress | { "id": 1, "isSeen": true } | ---          | ---     | ---     |
| Notification   | Update Notification with id   | `/api/v1/Notification/:id:isSeen` (PUT)| In progress | { "id": 1, "priority": "High" } | ---          | ---     | ---     |

#### <span style="border: 4px solid black; padding: 5px;">Report</span>

| Operation Type | End Point Explanation         | End Point                          | Status | Object | WillBeUsed? | In Test | In Prod |
| -------------- | ----------------------------- | ---------------------------------- | ------ | ------ | ----------- | ------- | ------- |
| Report         | CSV Report                    | `/api/v1/SendCSVtoAmazon` (POST)   | Done   | ----   | ---         | ---     | ---     |


#### <span style="border: 4px solid black; padding: 5px;">Settings</span>

| Operation Type | End Point Explanation       | End Point | Status        | Object | WillBeUsed?  In Test | In Prod |
| --------------- | -------------------------- | ---------------------- | ------------- | ------- | ------ | --- |
| Settings          | Various Settings                | `/api/v1/Settings`  (POST)           | Not Started   | ----   |  ---   | --- | --- |

 



